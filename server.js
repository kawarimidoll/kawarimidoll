// This script is generated by https://deno.land/x/deploy_dir@v0.3.2
import { decode } from "https://deno.land/std@0.97.0/encoding/base64.ts";
import { gunzip } from "https://raw.githubusercontent.com/kt3k/compress/bbe0a818d2acd399350b30036ff8772354b1c2df/gzip/gzip.ts";
console.log("init");
const dirData = {};
dirData["/index.html"] = [decode("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"), "text/html", '"a24d01046a377128088aaa5d783873e0"', "private"];
addEventListener("fetch", (e) => {
  let { pathname } = new URL(e.request.url);
  if (pathname.endsWith("/")) {
    pathname += "index.html";
  }
  let data = dirData[pathname];
  if (!data) {
    data = dirData[pathname + '.html'];
  }
  if (data) {
    const [bytes, mediaType, etag, cacheControl] = data;
    const acceptsGzip = e.request.headers.get("accept-encoding")?.split(/[,;]s*/).includes("gzip");
    if (e.request.headers.get("if-none-match") === etag) {
      e.respondWith(new Response(null, { status: 304, statusText: "Not Modified" }));
      return;
    }
    if (acceptsGzip) {
      e.respondWith(new Response(bytes, { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType,
        "content-encoding": "gzip",
      } }));
    } else {
      e.respondWith(new Response(gunzip(bytes), { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType
      } }));
    }
    return;
  }
  e.respondWith(new Response("404 Not Found", { status: 404 }));
});