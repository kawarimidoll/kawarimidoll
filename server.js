// This script is generated by https://deno.land/x/deploy_dir@v0.3.2
import { decode } from "https://deno.land/std@0.97.0/encoding/base64.ts";
import { gunzip } from "https://raw.githubusercontent.com/kt3k/compress/bbe0a818d2acd399350b30036ff8772354b1c2df/gzip/gzip.ts";
console.log("init");
const dirData = {};
dirData["/index.html"] = [decode("H4sIAAAAAAAAA61Z23LbNhD9FZSePjUkJdV2XFpSmqaZpG3SpE0ynTTTyYAkSMICCBQAdYnH/fYueJEpiY5MSy+KhV0cnLO7WADK+Juf3zx7//Htc5QZzqbj+pPgGElFErqcOCINMmNk4PsilR4nfq5PnOmYE4NRlGGliZk4hUnci2Y0x5xMnDklCymUcVAkckNy8FrQ2GSTmMxpRNzyyyOaU0Mxc3WEGZkMvUEDIpWQRJlVSaBQrAVj6WjgM8MLrCinsWDMi0ku4GPeOd+sJGnzIKGmhnS7UsPavu1FrGdCWffEmOhIUWmoyFvTn4aiMKgN0jnZ0vls4/aQlSnHKemID55jA/nxUmqyIiw0UbWLFwnuF/7F8PT84vH5k/nkdDN1ZkGNISqIsIpbuLrgHKtVt28Z0FvfH7ckl2Gddkka+5VtrM0K/glFvLqOqZYMr4KEkeXlVaENTVZujR1E8EHUJVBJaR4MLg1ZGhczmuaNCRIBC7ghyfCcCuDGhTDZDb4uXWMSCYVtnoJc5OQmG11XWG7IRDRzNQTNBO5IEX65YSB5DMtJHMc0T10jZHAKPjeUp2vCpeOaGsKFETcnHNP8uiz3YDgYfAvmZVX9wcVgIJcNYjAENDTwziyoVyXvOhQqJspVOKaFDs5gdkZompmghPYY1cZNlSjk9S3qWYm6SaLyhBzxbUhwrUfKBARaMBo3QxWgyWi+xiv5laBr4vXYqCSe47kbiuV1iKOZZZbHkDkGWThJkuRSCigUG3rIaTRbXdooDprVQmGM4MFQLlHJAp2MRqMS8esVoSWGhoLLxTZ1b1G87MzC9zZe5TJTvJnJm7FfVeWY0XyGFGETh0Z2g9uOAn/bnefrefrdkkOHyqBl3m4/hRd3bL32Ntj8wrGGAvaxhq6q16bPUUblZ7uwB2vBbvJth56O7V6ZjmM6RzSeOLbMwAbliDCDLVhVkIOqruuMzgewPxlA35q0ih7aLrLhxm4GSsOKShkwy6baOVVKbWk406eUIyNQSBBGGZQHUQjnMXyRQB10e2MfEEqY6TMG9WG9rwouPa9lakTUheZsD8IArlNxUvcYXcdlQ6+NZ6o8zP2EYJNB2DUHXxviJ5p+IZPRuVNFshy3YcctaCMEuyeude2AtcPbqLbO7olqXTtQ7fA2qi6kPYrvCZzSxHQA2+EauMrFTkZuu5EtkFFZlQdl4HSwnYFstLui7Wr3g49k0RLWgMOo01G7TQvZOV+c6TuRGKh9guDCQZg9ir8akvsT1BHVWsAm3GXZmHpS/YhnSMM5eDSKjCbEDQux6uC4tvUk+VdGCIP2SvM5jIhjUTWK4jzd2NIN08bUk+gveSyEAjqUh0eLqFFws7BXikJ2Ml1be5J9Jew1hSiObFz18eLKsXQlzTvI1paeRP8UgqPhYPgI/YolzjdY1m3kwd123UKabntYB+ECHixCdUmvLD2lcxy9eXes5gGrGZnBnbarfayNPRnSt3bSgRQ15ZLB05GIOeVd7Nr2ngR/Lycdh2D5iryTnrX2JPczTOmq5wef86eDrXPe1jPeunrWj7Kdy6ZzUJuqQTtaVGXpGZr31ayN6LRvLQ2T6j56XC015q6UytBTyQtqXhbhXiGSLonHsL/9Nj5AhqJxlwgY7inhLXBjeK+ELyTP7a8sx8tEKMSsQ4Id7inhb+C2V8C/lBp83FrSBKso6+oapaGnij8swb0yFouFFxYrTnAkkoSQ4yqqMTtuyqWhp6KfihXi9slXzd6rbeNnPdB12A5hIuxSUo73FPJ6heyvXOhTkcfwdIW1tFFFZH/O+Oc+XYzh43cxi9nZxcDQv4u9wiH6pA1mZL8gW4K55Fe61PTf0URJHM1w2pWz2tJTFnC8U1N9GB/yPD4dbD2Pu87jAh4LMLsKFeyB+Ak8i7l4JmIysePu6Oospj/MHoeDB8Wuvp+sl7nzBtN49IzhB5iGnsM8VPK2FQ/lH5MAbbHffwZGHhdSrrwr6QO4WvnwNgGBnszkk+rPifrw22MCz4GDysjWIVauBhkd4WhZ+zYByx6VTHErDg3nvQFIFGVWfCwWORM4PuzoyYCNfRuGOO1Kesvc90mGZwXHuzpfvHxtTndEbnyvfpX0y/9K+h9t/tsAYBoAAA=="), "text/html", '"e0217835f5a5952c4d03c5ef9c17076e"', "private"];
addEventListener("fetch", (e) => {
  let { pathname } = new URL(e.request.url);
  if (pathname.endsWith("/")) {
    pathname += "index.html";
  }
  let data = dirData[pathname];
  if (!data) {
    data = dirData[pathname + '.html'];
  }
  if (data) {
    const [bytes, mediaType, etag, cacheControl] = data;
    const acceptsGzip = e.request.headers.get("accept-encoding")?.split(/[,;]s*/).includes("gzip");
    if (e.request.headers.get("if-none-match") === etag) {
      e.respondWith(new Response(null, { status: 304, statusText: "Not Modified" }));
      return;
    }
    if (acceptsGzip) {
      e.respondWith(new Response(bytes, { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType,
        "content-encoding": "gzip",
      } }));
    } else {
      e.respondWith(new Response(gunzip(bytes), { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType
      } }));
    }
    return;
  }
  e.respondWith(new Response("404 Not Found", { status: 404 }));
});