// This script is generated by https://deno.land/x/deploy_dir@v0.3.2
import { decode } from "https://deno.land/std@0.97.0/encoding/base64.ts";
import { gunzip } from "https://raw.githubusercontent.com/kt3k/compress/bbe0a818d2acd399350b30036ff8772354b1c2df/gzip/gzip.ts";
console.log("init");
const dirData = {};
dirData["/index.html"] = [decode("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"), "text/html", '"5a24cbfeec4062328a7de46083bddae2"', "private"];
addEventListener("fetch", (e) => {
  let { pathname } = new URL(e.request.url);
  if (pathname.endsWith("/")) {
    pathname += "index.html";
  }
  let data = dirData[pathname];
  if (!data) {
    data = dirData[pathname + '.html'];
  }
  if (data) {
    const [bytes, mediaType, etag, cacheControl] = data;
    const acceptsGzip = e.request.headers.get("accept-encoding")?.split(/[,;]s*/).includes("gzip");
    if (e.request.headers.get("if-none-match") === etag) {
      e.respondWith(new Response(null, { status: 304, statusText: "Not Modified" }));
      return;
    }
    if (acceptsGzip) {
      e.respondWith(new Response(bytes, { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType,
        "content-encoding": "gzip",
      } }));
    } else {
      e.respondWith(new Response(gunzip(bytes), { headers: {
        etag,
	"cache-control": cacheControl,
        "content-type": mediaType
      } }));
    }
    return;
  }
  e.respondWith(new Response("404 Not Found", { status: 404 }));
});